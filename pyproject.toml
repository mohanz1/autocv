[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "autocv"
description = "Computer vision library."
authors = ["Zach <Zach#2679>"]
readme = "README.md"
version = "0.0.1"


[tool.poetry.dependencies]
python = ">=3.10,<3.12"

numpy                       = "~1.26"
opencv-python               = "~4.8"
pandas                      = "~2.1"
pillow                      = "~10.1"
pytesseract                 = "~0.3"
pywin32                     = "~306"

[tool.poetry.extras]
stubs = ["opencv-stubs", "types_pywin32", "types-Pillow", "pandas-stubs"]

[tool.poetry.dev-dependencies]
mypy                        = "~1.7"
opencv-stubs                = "~0.0"
pandas-stubs                = "~2.1"
ruff                        = "~0.1"
types-Pillow                = "~10.1"
types_pywin32               = "~306"


[tool.poetry.scripts]
base = "base.cli:main"

[tool.ruff]
line-length = 132
ignore-init-module-imports = true

# Assume Python 3.10
target-version = "py310"

[tool.ruff.lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`)  codes by default.
select = [
    "F",  # pyflakes
    "E",  # pycodestyle error
    "W",  # pycodestyle warning
    "C90",  # mccabe
    "I",  # isort
#    "D",  # pydocstyle
    "N",  # pep8-naming
    "UP",  # pyupgrade
    "YTT",  # flake8-2020
    "ANN",  # flake8-annotations
]
ignore = ["ANN101", "ANN102"]

fixable = ["ALL"]

[tool.ruff.format]
# Like Black, use double quotes for strings.
quote-style = "double"

# Like Black, indent with spaces, rather than tabs.
indent-style = "space"

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = "auto"

[tool.ruff.lint.flake8-annotations]
allow-star-arg-any = true

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.mypy]
# general settings
strict = true
check_untyped_defs = true
incremental = true
namespace_packages = true
no_implicit_optional = true
pretty = true
python_version = "3.11"
show_column_numbers = true
show_error_codes = true
show_error_context = true

# stuff to allow
allow_untyped_globals = false
allow_redefinition = true

# stuff to disallow
disallow_untyped_decorators = true
disallow_incomplete_defs = true
disallow_untyped_defs = true

# warnings
warn_no_return = true
warn_redundant_casts = true
warn_return_any = true
warn_unreachable = true
warn_unused_configs = true
warn_unused_ignores = true
exclude = [
    "venv",
    "data"
]
